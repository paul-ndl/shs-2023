!function(){"use strict";const e=e=>{const t=document.cookie.split(";").map((e=>e.trim()));for(let o=0;o<t.length;o+=1){const[n="",i=""]=t[o].split("=");if(n===e)return i}return null},t=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8e3;const n=e("_autid");if(n)return void t(n);let i=!1;const r=setTimeout((()=>{i||t(null)}),o);window.addEventListener("nyp-aqfer:aut-cookie-ready",(o=>{clearTimeout(r);const{detail:{aut:n=e("_autid")}={}}=o;i=!0,t(n),clearTimeout(r)}))},o=async(e,t)=>{const o=`__cachedAqferResponse_${t}`,n=window.localStorage?.getItem(o);if(n){const{data:e,expiration:t}=JSON.parse(n);if(t>(new Date).getTime())return e}const i=(new Date).getTime()+6048e5,{nypAqfer:{aqferAccessToken:r=""}={}}=window;return fetch(e,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>(localStorage?.setItem(o,JSON.stringify({data:e,expiration:i})),e)))},n=async t=>t?o(`https://graphds-c057.a24365.io/v2/entities/ck~nypost~${t}/edges`,"neighbors").then((t=>{window.localStorage?.setItem("aqfer",JSON.stringify(t));const{data:o=[]}=t;if(console.log("Aqfer Neighbors",o),o.length){const t=o.filter((e=>"em"===e.type)).map((e=>e.key));t.length&&(n=t[0],e("uid2_identity")||(console.log(`Fetching UID2 token for ${n}`),fetch("https://api.nypdev.com/ads/tradedesk/token",{body:JSON.stringify({email:n}),headers:{Authorization:"Basic QGxsZXk6dmZEVEJPM1Y3cnJ5","Content-Type":"application/json"},method:"POST"}).then((e=>e.ok?e.json():Promise.reject(e))).then((e=>{const{Message:{Data:t}={}}=e;t&&((e,t,o)=>{const n=new Date;n.setTime(n.getTime()+31536e6);const i=`expires=${n.toUTCString()}`;document.cookie=`uid2_identity=${t};${i};path=/`})(0,JSON.stringify(t))})).catch((e=>console.error("Error fetching UID2 token",e)))))}var n})).catch((e=>console.error("Aqfer Neighbors Error",e))):(console.log("No _autid cookie found for edge lookup."),null),i=async e=>{e?o(`https://dbds-c057.a24365.io/v2/entities/ck~nypost~${e}`,"nyp_id").then((t=>{const{key:o=""}=t;window.localStorage?.setItem("nyp_id",o),window.dispatchEvent(new CustomEvent("nyp-aqfer:nyp-id-ready",{detail:{nypId:o}})),((e,t)=>{const o=[];t&&o.push({id:t,tag:"_nypid-sync",priority:1}),o.push({id:e,tag:"_autid-sync",priority:2}),window.permutive?.identify(o)})(e,o||null)})).catch((e=>console.error("Aqfer NYPID Error",e))):console.log("No _autid cookie found for NYP ID Lookup.")},r=e=>{window.nypGa((()=>{window.ga("set","dimension82",e)}))},s=()=>{if(!document.cookie)return"";let e="";return document.cookie.split(";").forEach((t=>{t.includes("_autid=")&&window.nypGa((()=>{window.ga("set","dimension82",t.split("=")[1])})),t.includes("sailthru_visitor=")&&([,e]=t.split("="))})),e};(async()=>{const e=JSON.parse(window.localStorage?.getItem("zephr")||"")||{},{user:{account:{emailAddress:o=""}={},trackingId:a=""}={}}=e,{nypAqfer:{featureFlags:{tag:c=!1}={},root:d=""}={}}=window;c&&((()=>{const{root:e=""}=window.nypAqfer||{};window.addEventListener("message",(t=>{if(t.origin!==e)return;const{data:o}=t;try{const e=JSON.parse(o),{message:t="",sub_autId:n="",sub_ipaddr:i=""}=e;if("aut cookie ready"===t&&n)return void window.dispatchEvent(new CustomEvent("nyp-aqfer:aut-cookie-ready",{detail:{aut:n}}));localStorage?(localStorage?.setItem("_autId",n),localStorage?.setItem("ipaddr",i)):console.error("localStorage is not supported on this browser for ID5 Identity Resolution")}catch(e){console.log("Error parsing message for ID5 Identity Resolution",e)}}))})(),t(n),t(i),t(r),(e=>{const{nypAqfer:{isProduction:t=!1}={}}=window,o=e;t||(o.cls="preprod"),console.log("Aqfer C057Data",o),window.c057Data=o,function(e,t,o,n){var i,r=[],s=e.tt.slice(-1),a={cdmn:1,lm:1,tt:1},c={cid:1,cls:1,dmn:1,pubid:1,evid:1,aq_m:1};for(i in e.dmn=(e.dmn||(o.top[n]===o[n]?""+o[n]:t.referrer).split("/")[2]).split(":")[0],e)(c[i]||("j"!=s||e.aq_m)&&!a[i])&&r.push(i+"="+e[i]);const d=t.createElement("f"==s?"img":"script");d.id=d.title="pxscrpt",d.async=d.defer=!0,d.src="//"+e.cdmn+"/1/"+e.lm+"/"+e.tt+"?"+r.join("&"),t.body.appendChild(d)}(o,document,window,"location")})({cdmn:d.replace("https://",""),lm:"e",tt:"tcs.dhj",aqet:"pv",v0:o,v1:s(),v2:a,v3:"",v4:"",v5:""}))})()}();