jQuery,$.fn.jamieSaw=function(s,e){function l(){var e=$(this).parent(".jamieSawContainer");e.css("width",e.outerWidth()),e.css("overflow","hidden"),$(this).css("display","table"),$(this).css("width","100%"),$(this).css("overflow","hidden"),$("th, td",this).each(function(){$(this).css("width",$(this).outerWidth())}),$(this).css("display","block"),$(this).css("width",$(this).parent().outerWidth())}function o(e,t){if(e&&(this.pinnedColumns=e),t&&(this.resizeCallback=t),this.boundResizeFunction=function(){(function(){var e=this;{var t;$(e).data("jamieSawIsResizing")||($(e).data("jamieSawIsResizing",!0),$(e).css("display","block"),$(e).css("overflow","auto"),$(e).css("width","0"),(t=$(e).parent(".jamieSawContainer")).css("overflow","auto"),t.css("width","100%"),$("th:not(.pinned), td:not(.pinned)",e).each(function(){$(this).css("left","0px")}),l.call(e),o.call(e,s),$(e).data("jamieSawIsResizing",!1))}}).call(this),this.resizeCallback()}.bind(this),this.boundMousedownFunction=function(){this.mouseDown=!0,this.mouseX=null,this.deltaX=0,this.lastMove=Date(),this.momentum=[],function(){$(window).unbind("mousemove",this.boundMousemoveFunction),$(window).bind("mousemove",this.boundMousemoveFunction)}.call(this)}.bind(this),this.boundMousemoveFunction=function(e){{var t;this.mouseDown&&(this.mouseX&&0!==this.mouseX&&(t=this.mouseX-e.pageX,this.deltaX+=t,(t=(t=new Date(this.lastMove)).setMilliseconds(t.getMilliseconds()+200))<new Date&&(a.call(this,this.tableWidth,this.pinnedWidth,this.deltaX),this.lastMove=Date(),this.momentum.push(this.deltaX),this.momentum=this.momentum.slice(0,3),this.deltaX=0)),this.mouseX=e.pageX)}}.bind(this),this.boundMouseupFunction=function(){$(window).unbind("mousemove",this.boundMousemoveFunction),this.mouseDown&&(this.mouseDown=!1,this.mouseX=null,window.setTimeout(d.bind(this),5))}.bind(this),this.mouseDown=!1,this.mouseX=null,this.lastMove=null,this.deltaX=null,this.momentum=[],void 0===e)$("th:nth-child(1), td:nth-child(1)",this).each(function(){$(this).addClass("pinned")});else for(var i=0;i<e;i++)$("th:nth-child("+(i+1)+"), td:nth-child("+(i+1)+")",this).each(function(){$(this).addClass("pinned")});var n=0;$("th:not(.ng-hide)",this).each(function(){$(this).data("jamieSawIndex",n++)}),$("tr",this).each(function(){n=0;$("td:not(.ng-hide)",this).each(function(){$(this).addClass("jamieSawIndex"+n),n++})}),function(){this.pinnedWidth=$(".pinned",this)[0]?$(".pinned",this)[0].offsetWidth:0,this.tableWidth=this.offsetWidth-this.pinnedWidth}.call(this),a.call(this,this.pinnedWidth,this.tableWidth,0)}function t(e,t){!function(){$(this).unbind("mousemove",this.boundMousedownFunction),$(this).bind("mousedown",this.boundMousedownFunction)}.call(this),function(){$(window).unbind("mouseup",this.boundMouseupFunction),$(window).bind("mouseup",this.boundMouseupFunction)}.call(this),function(){$(window).unbind("resize",this.boundResizeFunction),$(window).bind("resize",this.boundResizeFunction),$(window).unbind("orientationchange",this.boundResizeFunction),$(window).bind("orientationchange",this.boundResizeFunction)}.call(this,e,t)}function a(e,t,i){for(var n=this,s=!1,l=!1,o=$("th:not(.pinned):not(.ng-hide)",n),a=0;a<o.length;a++){var d=o[a],c=$(d).data("jamieSawIndex"),h=$(d,n).css("left").split("px")[0],u=parseInt($("tr:first-child",n)[0].offsetWidth)+parseInt(h-i)-parseInt(t);if(h-i<=0&&e<=u){var r=parseInt(h-i);$(d).css("left",r+"px");for(var p=$("td.jamieSawIndex"+c,n),f=0;f<p.length;f++){var m=p[f];$(m).css("left",r+"px")}c=!1;r<0&&(c=s=!0),e<u&&(c=l=!0),s?$("tr",n).each(function(){$("th.pinned, td.pinned",this).last().addClass("moreLeft")}):$("tr",n).each(function(){$("th.pinned, td.pinned",this).last().removeClass("moreLeft")}),c?$(n).addClass("jamieSawed"):$(n).removeClass("jamieSawed"),l?$(n).addClass("moreRight"):$(n).removeClass("moreRight")}}}function d(){var e=this.momentum.reduce(function(e,t){return t+e},0)/this.momentum.length;e&&(a.call(this,this.tableWidth,this.pinnedWidth,e),this.momentum=this.momentum.map(function(e){return.8*e}),e<3&&-1<e?this.momentum=[]:window.setTimeout(d.bind(this),5))}function i(){$(this).unbind("mousemove",this.boundMousedownFunction),$(window).unbind("mouseup",this.boundMouseupFunction),$(window).unbind("resize",this.boundResizeFunction),$(window).unbind("orientationchange",this.boundResizeFunction)}return $.each(this,function(){$.fn.addTouchAsClickHander(),$(this).unbind("disableJamieSaw",function(){i.call(this)}),$(this).bind("disableJamieSaw",function(){i.call(this)}),l.call(this),o.call(this,s,e),t.call(this,s,e||function(){return null})}),this},function(o){o.fn.SumoSelect=function(e){var l=o.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",captionFormatAllSelected:"{0} all selected!",floatWidth:400,forceCustomRendering:!1,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,triggerChangeCombined:!0,selectAll:!1,search:!1,searchText:"Search...",noMatch:'No matches for "{0}"',prefix:"",locale:["OK","Cancel","Select All"],up:!1},e),e=this.each(function(){var s=this;!this.sumo&&o(this).is("select")&&(this.sumo={E:o(s),is_multi:o(s).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",ul:"",is_floating:!1,is_opened:!1,mob:!1,Pstate:[],createElems:function(){var e=this;e.E.wrap('<div class="SumoSelect" tabindex="0">'),e.select=e.E.parent(),e.caption=o("<span>"),e.CaptionCont=o('<p class="CaptionCont"><label><i></i></label></p>').addClass("SelectBox").attr("style",e.E.attr("style")).prepend(e.caption),e.select.append(e.CaptionCont),e.is_multi||(l.okCancelInMulti=!1),e.E.attr("disabled")&&e.select.addClass("disabled").removeAttr("tabindex"),l.outputAsCSV&&e.is_multi&&e.E.attr("name")&&(e.select.append(o('<input class="HEMANT123" type="hidden" />').attr("name",e.E.attr("name")).val(e.getSelStr())),e.E.removeAttr("name")),!e.isMobile()||l.forceCustomRendering?(e.E.attr("name")&&e.select.addClass("sumo_"+e.E.attr("name")),e.E.addClass("SumoUnder").attr("tabindex","-1"),e.optDiv=o('<div class="optWrapper '+(l.up?"up":"")+'">'),e.floatingList(),e.ul=o('<ul class="options">'),e.optDiv.append(e.ul),l.selectAll&&e.SelAll(),l.search&&e.Search(),e.ul.append(e.prepItems(e.E.children())),e.is_multi&&e.multiSelelect(),e.select.append(e.optDiv),e.basicEvents(),e.selAllState()):e.setNativeMobile()},prepItems:function(e,i){var n=[],s=this;return o(e).each(function(e,t){t=o(t),n.push(t.is("optgroup")?o('<li class="group '+(t[0].disabled?"disabled":"")+'"><label>'+t.attr("label")+"</label><ul></ul><li>").find("ul").append(s.prepItems(t.children(),t[0].disabled)).end():s.createLi(t,i))}),n},createLi:function(e,t){return e.attr("value")||e.attr("value",e.val()),li=o('<li class="opt"><label>'+e.text()+"</label></li>"),li.data("opt",e),e.data("li",li),this.is_multi&&li.prepend("<span><i></i></span>"),(e[0].disabled||t)&&(li=li.addClass("disabled")),this.onOptClick(li),e[0].selected&&li.addClass("selected"),e.attr("class")&&li.addClass(e.attr("class")),li},getSelStr:function(){return sopt=[],this.E.find("option:selected").each(function(){sopt.push(o(this).val())}),sopt.join(l.csvSepChar)},multiSelelect:function(){var i=this;i.optDiv.addClass("multiple"),i.okbtn=o('<p class="btnOk">'+l.locale[0]+"</p>").click(function(){l.triggerChangeCombined&&(changed=!1,i.E.find("option:selected").length!==i.Pstate.length?changed=!0:i.E.find("option").each(function(e,t){t.selected&&i.Pstate.indexOf(e)<0&&(changed=!0)}),changed&&(i.callChange(),i.setText())),i.hideOpts()}),i.cancelBtn=o('<p class="btnCancel">'+l.locale[1]+"</p>").click(function(){i._cnbtn(),i.hideOpts()}),i.optDiv.append(o('<div class="MultiControls">').append(i.okbtn).append(i.cancelBtn))},_cnbtn:function(){var e=this;e.E.find("option:selected").each(function(){this.selected=!1}),e.optDiv.find("li.selected").removeClass("selected");for(var t=0;t<e.Pstate.length;t++)e.E.find("option")[e.Pstate[t]].selected=!0,e.ul.find("li.opt").eq(e.Pstate[t]).addClass("selected");e.selAllState()},SelAll:function(){var i=this;i.is_multi&&(i.selAll=o('<p class="select-all"><span><i></i></span><label>'+l.locale[2]+"</label></p>"),i.selAll.on("click",function(){i.selAll.toggleClass("selected"),i.optDiv.find("li.opt").not(".hidden").each(function(e,t){t=o(t),i.selAll.hasClass("selected")?t.hasClass("selected")||t.trigger("click"):t.hasClass("selected")&&t.trigger("click")})}),i.optDiv.prepend(i.selAll))},Search:function(){var i=this,e=i.CaptionCont.addClass("search"),t=o('<p class="no-match">');i.ftxt=o('<input type="text" class="search-txt" value="" placeholder="'+l.searchText+'">').on("click",function(e){e.stopPropagation()}),e.append(i.ftxt),i.optDiv.children("ul").after(t),i.ftxt.on("keyup.sumo",function(){var e=i.optDiv.find("ul.options li.opt").each(function(e,t){-1<(t=o(t)).text().toLowerCase().indexOf(i.ftxt.val().toLowerCase())?t.removeClass("hidden"):t.addClass("hidden")}).not(".hidden");t.html(l.noMatch.replace(/\{0\}/g,i.ftxt.val())).toggle(!e.length),i.selAllState()})},selAllState:function(){var i,n;l.selectAll&&(n=i=0,this.optDiv.find("li.opt").not(".hidden").each(function(e,t){o(t).hasClass("selected")&&i++,o(t).hasClass("disabled")||n++}),i===n?this.selAll.removeClass("partial").addClass("selected"):0===i?this.selAll.removeClass("selected partial"):this.selAll.addClass("partial"))},showOpts:function(){var t=this;t.E.attr("disabled")||(t.is_opened=!0,t.select.addClass("open"),(t.ftxt||t.select).focus(),o(document).on("click.sumo",function(e){t.select.is(e.target)||0!==t.select.has(e.target).length||t.is_opened&&(t.hideOpts(),l.okCancelInMulti&&t._cnbtn())}),t.is_floating&&(H=t.optDiv.children("ul").outerHeight()+2,t.is_multi&&(H+=parseInt(t.optDiv.css("padding-bottom"))),t.optDiv.css("height",H),o("body").addClass("sumoStopScroll")),t.setPstate())},setPstate:function(){var i=this;i.is_multi&&(i.is_floating||l.okCancelInMulti)&&(i.Pstate=[],i.E.find("option").each(function(e,t){t.selected&&i.Pstate.push(e)}))},callChange:function(){this.E.trigger("change").trigger("click")},hideOpts:function(){var e=this;e.is_opened&&(e.is_opened=!1,e.select.removeClass("open").find("ul li.sel").removeClass("sel"),o(document).off("click.sumo"),e.select.focus(),o("body").removeClass("sumoStopScroll"),l.search&&(e.ftxt.val(""),e.optDiv.find("ul.options li").removeClass("hidden"),e.optDiv.find(".no-match").toggle(!1)))},setOnOpen:function(){var e=this.optDiv.find("li.opt:not(.hidden)").eq(l.search?0:this.E[0].selectedIndex);this.optDiv.find("li.sel").removeClass("sel"),e.addClass("sel"),this.showOpts()},nav:function(e){var t=this,i=t.ul.find("li.opt:not(.disabled, .hidden)"),n=t.ul.find("li.opt.sel:not(.hidden)"),s=i.index(n);if(t.is_opened&&n.length){if(e&&0<s)l=i.eq(s-1);else{if(!(!e&&s<i.length-1&&-1<s))return;l=i.eq(s+1)}n.removeClass("sel");var n=l.addClass("sel"),i=t.ul,s=i.scrollTop(),l=n.position().top+s;l>=s+i.height()-n.outerHeight()&&i.scrollTop(l-i.height()+n.outerHeight()),l<s&&i.scrollTop(l)}else t.setOnOpen()},basicEvents:function(){var t=this;t.CaptionCont.click(function(e){t.E.trigger("click"),t.is_opened?t.hideOpts():t.showOpts(),e.stopPropagation()}),t.select.on("keydown.sumo",function(e){switch(e.which){case 38:t.nav(!0);break;case 40:t.nav(!1);break;case 32:if(l.search&&t.ftxt.is(e.target))return;break;case 13:t.is_opened?t.optDiv.find("ul li.sel").trigger("click"):t.setOnOpen();break;case 9:case 27:return l.okCancelInMulti&&t._cnbtn(),void t.hideOpts();default:return}e.preventDefault()}),o(window).on("resize.sumo",function(){t.floatingList()})},onOptClick:function(e){var t=this;e.click(function(){var e=o(this);e.hasClass("disabled")||(txt="",t.is_multi?(e.toggleClass("selected"),e.data("opt")[0].selected=e.hasClass("selected"),t.selAllState()):(e.parent().find("li.selected").removeClass("selected"),e.toggleClass("selected"),e.data("opt")[0].selected=!0),t.is_multi&&l.triggerChangeCombined&&(t.is_floating||l.okCancelInMulti)||(t.setText(),t.callChange()),t.is_multi||t.hideOpts())})},setText:function(){var e=this;if(e.placeholder="",e.is_multi){for(sels=e.E.find(":selected").not(":disabled"),i=0;i<sels.length;i++){if(i+1>=l.csvDispCount&&l.csvDispCount){sels.length===e.E.find("option").length&&l.captionFormatAllSelected?e.placeholder=l.captionFormatAllSelected.replace(/\{0\}/g,sels.length)+",":e.placeholder=l.captionFormat.replace(/\{0\}/g,sels.length)+",";break}e.placeholder+=o(sels[i]).text()+", "}e.placeholder=e.placeholder.replace(/,([^,]*)$/,"$1")}else e.placeholder=e.E.find(":selected").not(":disabled").text();return is_placeholder=!1,e.placeholder||(is_placeholder=!0,e.placeholder=e.E.attr("placeholder"),e.placeholder||(e.placeholder=e.E.find("option:disabled:selected").text())),e.placeholder=e.placeholder?l.prefix+" "+e.placeholder:l.placeholder,e.caption.html(e.placeholder),e.CaptionCont.attr("title",e.placeholder),csvField=e.select.find("input.HEMANT123"),csvField.length&&csvField.val(e.getSelStr()),is_placeholder?e.caption.addClass("placeholder"):e.caption.removeClass("placeholder"),e.placeholder},isMobile:function(){for(var e=navigator.userAgent||navigator.vendor||window.opera,t=0;t<l.nativeOnDevice.length;t++)if(0<e.toString().toLowerCase().indexOf(l.nativeOnDevice[t].toLowerCase()))return l.nativeOnDevice[t];return!1},setNativeMobile:function(){var e=this;e.E.addClass("SelectClass"),e.mob=!0,e.E.change(function(){e.setText()})},floatingList:function(){var e=this;e.is_floating=o(window).width()<=l.floatWidth,e.optDiv.toggleClass("isFloating",e.is_floating),e.is_floating||e.optDiv.css("height",""),e.optDiv.toggleClass("okCancelInMulti",l.okCancelInMulti&&!e.is_floating)},vRange:function(e){if(opts=this.E.find("option"),opts.length<=e||e<0)throw"index out of bounds";return this},toggSel:function(e,t){var i=this;opt="number"==typeof t?(i.vRange(t),i.E.find("option")[t]):i.E.find('option[value="'+t+'"]')[0]||0,opt&&!opt.disabled&&opt.selected!==e&&(opt.selected=e,i.mob||o(opt).data("li").toggleClass("selected",e),i.callChange(),i.setPstate(),i.setText(),i.selAllState())},toggDis:function(e,t){var i=this.vRange(t);(i.E.find("option")[t].disabled=e)&&(i.E.find("option")[t].selected=!1),i.mob||i.optDiv.find("ul.options li").eq(t).toggleClass("disabled",e).removeClass("selected"),i.setText()},toggSumo:function(e){var t=this;return t.enabled=e,t.select.toggleClass("disabled",e),e?(t.E.attr("disabled","disabled"),t.select.removeAttr("tabindex")):(t.E.removeAttr("disabled"),t.select.attr("tabindex","0")),t},toggSelAll:function(i){var n=this;n.E.find("option").each(function(e,t){n.E.find("option")[o(this).index()].disabled||(n.E.find("option")[o(this).index()].selected=i,n.mob||n.optDiv.find("ul.options li").eq(o(this).index()).toggleClass("selected",i),n.setText())}),!n.mob&&n.selAll&&n.selAll.removeClass("partial").toggleClass("selected",i),n.callChange(),n.setPstate()},reload:function(){var e=this.unload();return o(e).SumoSelect(l)},unload:function(){var e=this;return e.select.before(e.E),e.E.show(),l.outputAsCSV&&e.is_multi&&e.select.find("input.HEMANT123").length&&e.E.attr("name",e.select.find("input.HEMANT123").attr("name")),e.select.remove(),delete s.sumo,s},add:function(e,t,i){if(void 0===e)throw"No value to add";var n=this;if(opts=n.E.find("option"),"number"==typeof t&&(i=t,t=e),void 0===t&&(t=e),opt=o("<option></option>").val(e).html(t),opts.length<i)throw"index out of bounds";return void 0===i||opts.length===i?(n.E.append(opt),n.mob||n.ul.append(n.createLi(opt))):(opts.eq(i).before(opt),n.mob||n.ul.find("li.opt").eq(i).before(n.createLi(opt))),s},remove:function(e){var t=this.vRange(e);t.E.find("option").eq(e).remove(),t.mob||t.optDiv.find("ul.options li").eq(e).remove(),t.setText()},selectItem:function(e){this.toggSel(!0,e)},unSelectItem:function(e){this.toggSel(!1,e)},selectAll:function(){this.toggSelAll(!0)},unSelectAll:function(){this.toggSelAll(!1)},disableItem:function(e){this.toggDis(!0,e)},enableItem:function(e){this.toggDis(!1,e)},enabled:!0,enable:function(){return this.toggSumo(!1)},disable:function(){return this.toggSumo(!0)},init:function(){return this.createElems(),this.setText(),this}},s.sumo.init())});return 1===e.length?e[0]:e}}(jQuery),function(){function e(e){var t=e.changedTouches[0],i="";switch(e.target.touchStartX=0,e.type){case"touchstart":i="mousedown";break;case"touchmove":i="mousemove";break;case"touchend":i="mouseup";break;default:return}e=document.createEvent("MouseEvent");e.initMouseEvent(i,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(e)}$.fn.addTouchAsClickHander=function(){document.addEventListener("touchstart",e,!0),document.addEventListener("touchmove",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("touchcancel",e,!0)}}(jQuery);